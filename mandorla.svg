<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  width="8in"
  height="6in"
  viewBox="-200 -150 400 300"
>
  <title xml:lang="en">Vesica Piscis (Mandorla)</title>
  <desc xml:lang="en">
    Construction of an equilateral triangle and a square from a figure
    made of two intersecting circles called a Vesica Piscis, or Mandorla.
    From the book "Mandala, Journey to the Centre", by Bailey Cunningham.
  </desc>
  <title xml:lang="fr">Vesica Piscis</title>
  <desc xml:lang="fr">
    Construstion d'un triangle équilatéral et d'un carré à partir d'une
    figure géométrique appelée Vesical Piscis, formée de deux cercles croisés.
    Extraite du livre "Mandala, Voyage vers le centre", de Bailey Cunningham.
  </desc>
  <style type="text/css">
    .step {
      visibility: hidden;
    }
    .empty, .contour {
      fill: none;
    }
    .line, .contour, .point {
      stroke: black;
    }
    .line, .contour {
      stroke-width: 1.5;
    }
    .dashed {
      stroke: #eee;
      stroke-dasharray: 10,10;
      stroke-width: 2;
    }
  </style>
  <defs>
    <circle id="point" r="1.5" class="point" />
    <g id="mandorla" >
      <circle class="step contour" cx="-50" cy="0" r="100">
        <set id="step11"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step10.end" dur="0.5s" fill="freeze"
        />
      </circle>
      <circle class="step contour" cx="50" cy="0" r="100">
        <set id="step21"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step20.end" dur="0.5s" fill="freeze"
        />
      </circle>
    </g>
  </defs>
  <g id="lines" class="background">
    <line class="step dashed" x1="-175" x2="175" y1="0" y2="0">
      <set id="step30"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step21.end" dur="0.5s" fill="freeze"
      />
    </line>
    <!--
    Computation for h, the half-height of the line in the middle
    of the mandorla, given r the radius of the circle.

    Pythagoras's theorem of right-angled triangle gives:
      h² + (r/2)² = r²
    which gives:
      h² = r² - (r/2)² = r² - r²/4 = 3r²/4
    or:
      h = √3*r/2
    with r=100, h~86.602540
    -->
    <line class="step dashed" x1="0" x2="0" y1="-86.6" y2="86.6">
      <set id="step31"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step30.end" dur="0.5s" fill="freeze"
      />
    </line>
    <circle class="step empty dashed" cx="0" cy="0" r="50">
      <set id="step51"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step50.end" dur="0.5s" fill="freeze"
      />
    </circle>
  </g>
  <g id="figures" class="foreground">
    <use xlink:href="#mandorla" transform="translate(0,0)" />
    <g id="triangle">
      <line class="step line" x1="0" x2="-100" y1="-86.6" y2="86.6">
        <set id="step41"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step40.end" dur="0.5s" fill="freeze"
        />
      </line>
      <line class="step line" x1="-100" x2="100" y1="86.6" y2="86.6">
        <set id="step43"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step42.end" dur="0.5s" fill="freeze"
        />
      </line>
      <line class="step line" x1="100" x2="0" y1="86.6" y2="-86.6">
        <set id="step45"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step44.end" dur="0.5s" fill="freeze"
        />
      </line>
    </g>
    <g id="square">
      <line class="step line" x1="0" x2="-50" y1="-50" y2="0">
        <set id="step60"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step53.end" dur="0.5s" fill="freeze"
        />
      </line>
      <line class="step line" x1="-50" x2="0" y1="0" y2="50">
        <set id="step61"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step60.end" dur="0.5s" fill="freeze"
        />
      </line>
      <line class="step line" x1="0" x2="50" y1="50" y2="0">
        <set id="step62"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step61.end" dur="0.5s" fill="freeze"
        />
      </line>
      <line class="step line" x1="50" x2="0" y1="0" y2="-50">
        <set id="step63"
          attributeName="visibility" attributeType="CSS" to="visible"
          begin="step62.end" dur="0.5s" fill="freeze"
        />
      </line>
    </g>
  </g>
  <g id="points" class="foremost">
    <use class="step" xlink:href="#point" transform="translate(-50,0)">
      <set id="step10"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="0.5s" dur="0.5s" fill="freeze"
      />
    </use>
    <use class="step" xlink:href="#point" transform="translate(50,0)">
      <set id="step20"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step11.end" dur="0.5s" fill="freeze"
      />
    </use>
    <use class="step" xlink:href="#point" transform="translate(0,-86.6)">
      <set id="step40"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step31.end" dur="0.5s" fill="freeze"
      />
    </use>
    <use class="step" xlink:href="#point" transform="translate(-100,86.6)">
      <set id="step42"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step41.end" dur="0.5s" fill="freeze"
      />
    </use>
    <use class="step" xlink:href="#point" transform="translate(100,86.6)">
      <set id="step44"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step43.end" dur="0.5s" fill="freeze"
      />
    </use>
    <use class="step" xlink:href="#point" id="center">
      <set id="step50"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step45.end" dur="0.5s" fill="freeze"
      />
    </use>
    <use class="step" xlink:href="#point" transform="translate(0,-50)">
      <set id="step52"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step51.end" dur="0.5s" fill="freeze"
      />
    </use>
    <use class="step" xlink:href="#point" transform="translate(0,50)">
      <set id="step53"
        attributeName="visibility" attributeType="CSS" to="visible"
        begin="step52.end" dur="0.5s" fill="freeze"
      />
    </use>
  </g>
</svg>
